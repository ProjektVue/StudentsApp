(function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],r=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=s[0]))}return e}var r={},a={app:0},n=[];function i(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=r,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://projektvue.github.io/StudentsApp/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},1:function(e,t){},1543:function(e,t,s){"use strict";s.r(t),s.d(t,"db",(function(){return i})),s.d(t,"auth",(function(){return o})),s.d(t,"currentUser",(function(){return c})),s.d(t,"usersCollection",(function(){return l})),s.d(t,"conversationsCollection",(function(){return d})),s.d(t,"eventsCollection",(function(){return u}));var r=s("8aa5"),a=s.n(r);s("e71f");const n={apiKey:"AIzaSyBw-8sQrmY4_ZiQ9SFD3jt-qgKwpD-3Rz0",authDomain:"studentapp-5e077.firebaseapp.com",databaseURL:"https://studentapp-5e077.firebaseio.com",projectId:"studentapp-5e077",storageBucket:"studentapp-5e077.appspot.com",messagingSenderId:"462180078687",appId:"1:462180078687:web:0dbf636f843e68d9f637ea"};a.a.initializeApp(n);const i=a.a.firestore(),o=a.a.auth(),c=o.currentUser,l=i.collection("users"),u=i.collection("events"),d=i.collection("conversations")},2:function(e,t){},3:function(e,t){},4:function(e,t){},4678:function(e,t,s){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id="4678"},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[e.currentUser?s("Navigation"):e._e(),s("router-view")],1)},n=[],i=s("2f62"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",[s("section",[s("div",{staticClass:"col1"},[s("router-link",{attrs:{to:"dashboard"}},[s("h3",[e._v("StudentApp")])]),s("ul",{staticClass:"inline"},[s("li",[s("router-link",{attrs:{to:"dashboard"}},[e._v("Dashboard")])],1),s("li",[s("router-link",{attrs:{to:"create_event"}},[e._v("Create Event")])],1),s("li",[s("router-link",{attrs:{to:"users"}},[e._v("Users")])],1),s("li",[s("router-link",{attrs:{to:"chat"}},[e._v("Chat")])],1),s("li",[s("a",{on:{click:e.logout}},[e._v("logout")])])])],1)])])},c=[];const l=s("1543");var u={methods:{logout(){l.auth.signOut().then(()=>{this.$store.dispatch("clearData"),this.$router.push("/login")}).catch(e=>{console.log(e)})}}},d=u,p=s("2877"),m=Object(p["a"])(d,o,c,!1,null,null,null),h=m.exports,f={components:{Navigation:h},computed:{...Object(i["b"])(["currentUser"])}},b=f,v=Object(p["a"])(b,a,n,!1,null,null,null),g=v.exports,j=s("8c4f"),y=s("8aa5"),w=s.n(y),C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("transition",{attrs:{name:"fade"}},[e.performingRequest?s("div",{staticClass:"loading"},[s("p",[e._v("Loading...")])]):e._e()]),s("section",[e._m(0),s("div",{staticClass:"col2",class:{"signup-form":!e.showLoginForm&&!e.showForgotPassword}},[e.showLoginForm?s("b-form",{on:{submit:function(e){e.preventDefault()}}},[s("h1",[e._v("Welcome Back")]),s("b-form-group",{attrs:{id:"input-group-1",label:"Email address:","label-for":"input-1"}},[s("b-form-input",{attrs:{id:"input-1",type:"email",required:"",placeholder:"Enter email"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),s("b-form-group",{attrs:{id:"input-group-2",label:"Password","label-for":"text-password"}},[s("b-input",{attrs:{type:"password",id:"text-password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.login}},[e._v("Login")]),s("div",{staticClass:"extras"},[s("a",{on:{click:e.togglePasswordReset}},[e._v("Forgot Password")]),s("a",{on:{click:e.toggleForm}},[e._v("Create an Account")])])],1):e._e(),e.showLoginForm||e.showForgotPassword?e._e():s("b-form",{on:{submit:function(e){e.preventDefault()}}},[s("h1",[e._v("Welcome Back")]),s("b-form-group",{attrs:{id:"input-group-6",label:"Email address:","label-for":"input-6",description:"We'll never share your email with anyone else."}},[s("b-form-input",{attrs:{id:"input-1",type:"email",required:"",placeholder:"Enter email"},on:{input:function(t){e.isTyping=!0}},model:{value:e.signUpEmail,callback:function(t){e.signUpEmail=t},expression:"signUpEmail"}})],1),s("b-form-group",{attrs:{id:"input-group-7",label:"Password","label-for":"input-7"}},[s("b-input",{attrs:{type:"password",id:"text-password"},model:{value:e.signupForm.password,callback:function(t){e.$set(e.signupForm,"password",t)},expression:"signupForm.password"}}),s("b-form-text",{attrs:{id:"password-help-block"}},[e._v(" Your password must be at least 6 characters. ")])],1),s("b-form-group",{attrs:{id:"input-group-2",label:"Name:","label-for":"input-2"}},[s("b-form-input",{attrs:{id:"input-2",placeholder:"John Smith",required:""},model:{value:e.signupForm.name,callback:function(t){e.$set(e.signupForm,"name",t)},expression:"signupForm.name"}})],1),s("b-form-group",{attrs:{id:"input-group-3",label:"Country:","label-for":"input-3"}},[s("b-form-input",{attrs:{id:"input-3",placeholder:"Poland",required:""},model:{value:e.signupForm.country,callback:function(t){e.$set(e.signupForm,"country",t)},expression:"signupForm.country"}})],1),s("b-form-group",{attrs:{id:"input-group-4",label:"City:","label-for":"input-5"}},[s("b-form-input",{attrs:{id:"input-5",placeholder:"Krakow",required:""},model:{value:e.signupForm.city,callback:function(t){e.$set(e.signupForm,"city",t)},expression:"signupForm.city"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.signup}},[e._v("Create account")]),s("div",{staticClass:"extras"},[s("a",{on:{click:e.toggleForm}},[e._v("Back to Log In")])])],1),e.showForgotPassword?s("form",{staticClass:"password-reset",on:{submit:function(e){e.preventDefault()}}},[e.passwordResetSuccess?s("div",[s("h1",[e._v("Email Sent")]),s("p",[e._v(" check your email for a link to reset your password ")]),s("button",{staticClass:"button",on:{click:e.togglePasswordReset}},[e._v(" Back to login ")])]):s("div",[s("h1",[e._v("Reset Password")]),s("p",[e._v("We will send you an email to reset your password")]),s("b-form-group",{attrs:{id:"input-group-6",label:"Email address:","label-for":"input-6"}},[s("b-form-input",{attrs:{id:"input-1",type:"email",required:"",placeholder:"Enter email"},model:{value:e.passwordForm.email,callback:function(t){e.$set(e.passwordForm,"email",t)},expression:"passwordForm.email"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.resetPassword}},[e._v("Reset password")]),s("div",{staticClass:"extras"},[s("a",{on:{click:e.togglePasswordReset}},[e._v("Back to Log In")])])],1)]):e._e(),s("transition",{attrs:{name:"fade"}},[""!==e.errorMsg?s("div",{staticClass:"error-msg"},[s("p",[e._v(e._s(e.errorMsg))])]):e._e()])],1)])],1)},_=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col1"},[s("h1",[e._v("Student App")]),s("p",[e._v(" Welcome to the Student App sample social media web app powered by Vue.js and Firebase. ")])])}];const U=e=>{let t=!0;return Object.values(e).forEach(e=>{e.length>0||(t=!1)}),t};var k=U,F=s("72fe"),P=s.n(F);const x=e=>P()(e.toLowerCase().trim());var E=x,S=s("bc3a"),$=s.n(S),A=s("2ef0"),O=s.n(A);const R=s("1543");var q={data(){return{loginForm:{email:"",password:""},signupForm:{country:"",name:"",city:"",password:""},passwordForm:{email:""},showLoginForm:!0,showForgotPassword:!1,passwordResetSuccess:!1,performingRequest:!1,errorMsg:"",signUpEmail:"",isTyping:!1,searchResult:[],isLoading:!1,gravatarApi:"https://cors-anywhere.herokuapp.com/https://www.gravatar.com",gravatarAvatarUrl:"https://www.gravatar.com/avatar",geoApiKey:"00d1be8f89674c93b01b3123654e71c4",geoApiUrl:"https://api.opencagedata.com/geocode/v1/json"}},methods:{prefillUserLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,s=e.coords.longitude;$.a.get(`${this.geoApiUrl}?key=${this.geoApiKey}&q=${t}%2C${s}`).then(e=>{if(e&&e.data&&e.data.results&&e.data.results.length&&e.data.results[0].components){const{town:t,country:s,city:r}=e.data.results[0].components;this.signupForm.city=r||t,this.signupForm.country=s}this.searchResult=e.data.items}).catch(e=>{console.error("Localization API not working")})},e=>{console.error("Geolocation not supported")})},toggleForm(){this.errorMsg="",this.showLoginForm=!this.showLoginForm,this.showLoginForm||this.prefillUserLocation()},togglePasswordReset(){this.showForgotPassword?(this.showLoginForm=!0,this.showForgotPassword=!1,this.passwordResetSuccess=!1):(this.showLoginForm=!1,this.showForgotPassword=!0)},login(){this.performingRequest=!0,R.auth.signInWithEmailAndPassword(this.loginForm.email,this.loginForm.password).then(e=>{this.$store.commit("setCurrentUser",e.user),this.$store.dispatch("fetchUserProfile"),this.performingRequest=!1,this.$router.push("/dashboard")}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})},signup(){k(this.signupForm)&&(this.performingRequest=!0,R.auth.createUserWithEmailAndPassword(this.signUpEmail,this.signupForm.password).then(e=>{this.$store.commit("setCurrentUser",e.user),R.usersCollection.doc(e.user.uid).set({country:this.signupForm.country,name:this.signupForm.name,city:this.signupForm.city,email:this.signUpEmail,avatar:this.getAvatarLink(this.signUpEmail),friends:[],events:[]}).then(()=>{this.$store.dispatch("fetchUserProfile"),this.performingRequest=!1,this.$router.push("/dashboard")}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message}))},getAvatarLink(e){if(e)return`${this.gravatarAvatarUrl}/${E(e)}`},resetPassword(){this.performingRequest=!0,R.auth.sendPasswordResetEmail(this.passwordForm.email).then(()=>{this.performingRequest=!1,this.passwordResetSuccess=!0,this.passwordForm.email=""}).catch(e=>{console.log(e),this.performingRequest=!1,this.errorMsg=e.message})},searchUserByEmail(e){this.isLoading=!0;const t=E(e);$.a.get(`${this.gravatarApi}/${t}.json`).then(e=>{this.isLoading=!1,e&&e.data&&e.data.entry&&e.data.entry.length&&(this.signupForm.name=e.data.entry[0].preferredUsername),this.searchResult=e.data.items}).catch(e=>this.isLoading=!1)}},watch:{signUpEmail:O.a.debounce((function(){this.isTyping=!1}),1e3),isTyping(e){e||this.searchUserByEmail(this.signUpEmail)}}},z=q,L=Object(p["a"])(z,C,_,!1,null,null,null),D=L.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"event-create-form"}},[s("div",{staticClass:"col1"},[s("b-alert",{attrs:{variant:"success",show:e.dismissCountDown,dismissible:""},on:{dismissed:function(t){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v("Event created")]),s("h3",[e._v("Create Event")]),s("div",[s("b-form",{on:{submit:function(e){e.preventDefault()}}},[s("b-form-group",{attrs:{id:"input-group-1",label:"Name:","label-for":"input-1"}},[s("b-form-input",{attrs:{id:"input-1",required:""},model:{value:e.event.name,callback:function(t){e.$set(e.event,"name",t)},expression:"event.name"}})],1),s("b-form-group",{attrs:{id:"input-group-2",label:"Place:","label-for":"input-2"}},[s("b-form-input",{attrs:{id:"input-2",required:""},model:{value:e.event.place,callback:function(t){e.$set(e.event,"place",t)},expression:"event.place"}})],1),s("b-form-group",{attrs:{id:"input-group-3",label:"Date:","label-for":"input-3"}},[s("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"example-datepicker",required:""},model:{value:e.event.date,callback:function(t){e.$set(e.event,"date",t)},expression:"event.date"}})],1),s("b-form-group",{attrs:{id:"input-group-4",label:"Time:","label-for":"input-4"}},[s("b-form-timepicker",{attrs:{locale:"en",required:""},model:{value:e.event.time,callback:function(t){e.$set(e.event,"time",t)},expression:"event.time"}})],1),s("b-form-group",{attrs:{id:"input-group-5",label:"Description:","label-for":"input-5"}},[s("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter event description...",rows:"3","max-rows":"6",required:""},model:{value:e.event.description,callback:function(t){e.$set(e.event,"description",t)},expression:"event.description"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.createEvent}},[e._v("Add event")])],1)],1)],1)])},I=[],M=(s("c1df"),s("fa33"));const T=s("1543");var N={components:{Datepicker:M["a"]},data(){return{event:{time:"",name:"",place:"",date:"",description:""},dismissCountDown:0}},computed:{...Object(i["b"])(["userProfile","currentUser"])},methods:{clearEvent(){this.event={time:"",name:"",place:"",date:"",description:""}},countDownChanged(e){this.dismissCountDown=e},createEvent(){k(this.event)&&T.eventsCollection.add({createdOn:new Date,userId:this.currentUser.uid,place:this.event.place,date:this.event.date,description:this.event.description,time:this.event.time,participants:0,createdBy:this.userProfile.name,name:this.event.name}).then(e=>{this.dismissCountDown=4,this.clearEvent()}).catch(e=>{console.log(e)})}}},W=N,J=Object(p["a"])(W,B,I,!1,null,null,null),K=J.exports,G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"dashboard"}},[s("section",[s("b-container",[s("b-row",{staticClass:"mt-4",attrs:{cols:"12"}},[s("b-col",{attrs:{cols:"4"}},[s("b-card",{staticClass:"mb-4",staticStyle:{"max-width":"20rem"},attrs:{header:"My profile","header-text-variant":"white","header-tag":"header","header-bg-variant":"primary"}},[s("b-card-text",[s("b-row",[s("b-col",{attrs:{"align-self":"center"}},[s("img",{staticStyle:{"min-width":"6rem"},attrs:{variant:"info",src:e.userProfile.avatar}})]),s("b-col",[e._v(" "+e._s(e.userProfile.name)+" "),s("br"),s("small",[e._v(e._s(e.userProfile.email)+" "),s("br"),e._v(" "+e._s(e.userProfile.city+", "+e.userProfile.country)+" "),s("br"),e._v(" "+e._s(e.friends.length)+" "+e._s(1===e.friends.length?"friend":"friends")+" "),s("br"),e._v(" "+e._s(e.numberOfEventsCreatedByUser)+" "+e._s(1===e.numberOfEventsCreatedByUser?"event":"events")+" created ")])])],1)],1)],1)],1),s("b-col",{attrs:{lg:"8",sm:"12"}},[s("h2",[e._v("Events")]),e._l(e.events,(function(t){return s("b-list-group",{key:t.id,staticClass:"mb-4 mt-4"},[s("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{href:"#"}},[s("div",{staticClass:"d-flex w-100 justify-content-between mb-2"},[s("h5",{staticClass:"mb-1"},[e._v(e._s(t.name))]),s("small",[e._v("added by "+e._s(t.createdBy))])]),s("p",[s("small",[e._v("Date:")]),e._v(" "+e._s(t.date)+" at "+e._s(t.time)+" ")]),s("p",[s("small",[e._v("Place:")]),e._v(" "+e._s(t.place))]),s("p",{staticClass:"mb-1"},[s("small",[e._v("Description: ")]),e._v(e._s(t.description)+" ")])])],1)}))],2)],1)],1)],1)])])},Q=[];s("1543");var Y={data(){return{}},computed:{...Object(i["b"])(["userProfile","currentUser","allUsers","events","numberOfEventsCreatedByUser","friends"])},methods:{}},H=Y,V=Object(p["a"])(H,G,Q,!1,null,null,null),Z=V.exports,X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"dashboard"}},[s("section",[e.friendsProfile.length?s("b-container",[s("h2",{staticClass:"mt-4"},[e._v("Friends")]),s("b-row",{staticClass:"mt-4",attrs:{cols:"1","cols-sm":"2","cols-md":"2","cols-lg":"4","align-v":"center"}},e._l(e.friendsProfile,(function(t){return s("b-col",{key:t.email},[s("b-card",{staticClass:"mb-4",attrs:{title:t.name,"sub-title":t.email,"img-src":t.avatar,alt:"Image","img-top":""}},[s("b-card-text",[e._v(" "+e._s(t.city+", "+t.country)+" ")]),s("b-button",{attrs:{type:"submit",variant:"danger"},on:{click:function(s){return e.removeFriend(t.uid)}}},[e._v("Remove friend")])],1)],1)})),1)],1):e._e()],1)]),s("div",{attrs:{id:"dashboard"}},[s("section",[e.otherUsers.length?s("b-container",[e.friendsProfile.length?e._e():s("div",{staticClass:"mt-4"}),s("h2",[e._v("Other Users")]),s("b-row",{staticClass:"mt-4",attrs:{cols:"1","cols-sm":"2","cols-md":"2","cols-lg":"4","align-v":"center"}},e._l(e.otherUsers,(function(t){return s("b-col",{key:t.email},[s("b-card",{staticClass:"mb-4",attrs:{title:t.name,"sub-title":t.email,"img-src":t.avatar,alt:"Image","img-top":""}},[s("b-card-text",[e._v(" "+e._s(t.city+", "+t.country)+" ")]),s("b-button",{attrs:{type:"submit",variant:"success"},on:{click:function(s){return e.addFriend(t.uid)}}},[e._v("Add friend")])],1)],1)})),1)],1):e._e(),e.otherUsers.length||e.friends.length?e._e():s("div",[s("p",{staticClass:"no-results"},[e._v("There are currently no users")])])],1)])])},ee=[];const te=s("1543");var se={data(){return{}},computed:{...Object(i["b"])(["userProfile","currentUser","allUsers","conversations","friends","activeChatUser"]),friendsProfile(){return this.allUsers.filter(e=>this.friends.includes(e.uid))},otherUsers(){return this.allUsers.filter(e=>!this.friends.includes(e.uid)&&this.currentUser.uid!==e.uid)}},methods:{addFriend(e){te.conversationsCollection.add({messages:[],participants:[e,this.currentUser.uid]}).then(()=>{this.$store.dispatch("fetchConversations")}).catch(e=>{console.log(e)})},removeFriend(e){const t=this.conversations.filter(t=>t.participants.includes(e));e===this.activeChatUser&&this.$store.commit("setActiveChatUser",""),te.conversationsCollection.doc(t[0].id).delete().then(()=>{this.$store.dispatch("fetchConversations")}).catch(e=>{console.log(e)})}}},re=se,ae=Object(p["a"])(re,X,ee,!1,null,null,null),ne=ae.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"dashboard"}},[s("section",[e.friendsProfile.length?s("b-container",[s("b-row",{staticClass:"mt-4",attrs:{cols:"12"}},[s("b-col",{attrs:{cols:"6"}},[s("b-container",e._l(e.friendsProfile,(function(t){return s("b-col",{key:t.email},[s("b-list-group",{staticStyle:{"max-width":"300px"}},[s("b-list-group-item",{staticClass:"d-flex align-items-center",attrs:{active:e.activeChatUser===t.uid},on:{click:function(s){return e.changeUser(t.uid)}}},[s("b-avatar",{staticClass:"mr-3",attrs:{src:t.avatar}}),s("span",{staticClass:"mr-auto"},[e._v(e._s(t.name))])],1)],1)],1)})),1)],1),s("b-col",{staticStyle:{height:"800px"},attrs:{lg:"6",sm:"12"}},[s("Chat",{attrs:{participants:e.participants,myself:e.myself,messages:e.messages,"chat-title":e.chatTitle,placeholder:e.placeholder,colors:e.colors,"border-style":e.borderStyle,"hide-close-button":!0,"submit-icon-size":e.submitIconSize,"async-mode":e.asyncMode,"scroll-bottom":e.scrollBottom,"display-header":!0,"send-images":!1,"profile-picture-config":e.profilePictureConfig},on:{onMessageSubmit:e.onMessageSubmit}})],1)],1)],1):s("b-container",{staticClass:"mt-4"},[e._v(" Add new friend to begin chat ")])],1)])])},oe=[],ce=s("3ce5");s("c561");const le=s("1543");var ue={components:{Chat:ce["Chat"]},data(){return{visible:!0,chatTitle:"Chat",placeholder:"send your message",colors:{header:{bg:"#007bff",text:"#fff"},message:{myself:{bg:"#fff",text:"#bdb8b8"},others:{bg:"#007bff",text:"#fff"},messagesDisplay:{bg:"#f7f3f3"}},submitIcon:"#007bff"},borderStyle:{topLeft:"10px",topRight:"10px",bottomLeft:"10px",bottomRight:"10px"},submitIconSize:25,closeButtonIconSize:"20px",asyncMode:!1,toLoad:[],scrollBottom:{messageSent:!0,messageReceived:!0},displayHeader:!0,profilePictureConfig:{others:!0,myself:!0,styles:{width:"30px",height:"30px",borderRadius:"50%"}}}},computed:{...Object(i["b"])(["userProfile","currentUser","allUsers","activeChatUser","friends","currentConversation"]),friendsProfile(){return this.allUsers.filter(e=>this.friends.includes(e.uid))},messages(){const e=this.currentConversation.messages||[],t=[];return e.forEach(e=>{t.push({content:e.content,myself:e.participantId===this.currentUser.uid,participantId:e.participantId,timestamp:JSON.parse(e.timestamp),type:e.type})}),t},myself(){return{name:this.userProfile.name,id:this.userProfile.uid,profilePicture:this.userProfile.avatar}},participants(){const e=this.allUsers.filter(e=>e.uid===this.activeChatUser);if(0===e.length)return[{}];const t=e[0];return[{name:t.name,id:t.uid,profilePicture:t.avatar}]}},methods:{changeUser(e){this.$store.commit("setActiveChatUser",e),this.$store.dispatch("fetchConversations")},onMessageSubmit(e){le.conversationsCollection.doc(this.currentConversation.id).update({participants:this.currentConversation.participants,messages:[...this.currentConversation.messages,{content:e.content,participantId:this.currentUser.uid,timestamp:JSON.stringify(e.timestamp),type:e.type}]}).then(e=>{this.$store.dispatch("fetchConversations")}).catch(e=>{console.log(e)})}}},de=ue,pe=Object(p["a"])(de,ie,oe,!1,null,null,null),me=pe.exports,he=s("5f5b"),fe=s("b1e0");s("f9e3"),s("2dd8");r["default"].use(he["a"]),r["default"].use(fe["a"]),r["default"].use(j["a"]);const be=new j["a"]({mode:"history",base:"/StudentsApp/",routes:[{path:"*",redirect:"/dashboard"},{path:"/login",name:"Login",component:D},{path:"/dashboard",name:"Dashboard",component:Z,meta:{requiresAuth:!0}},{path:"/create_event",name:"CreateEvent",component:K,meta:{requiresAuth:!0}},{path:"/users",name:"Users",component:ne,meta:{requiresAuth:!0}},{path:"/chat",name:"Chat",component:me}]});be.beforeEach((e,t,s)=>{const r=e.matched.some(e=>e.meta.requiresAuth),a=w.a.auth().currentUser;r&&!a?s("/login"):s()});var ve=be;const ge=s("1543");r["default"].use(i["a"]),ge.auth.onAuthStateChanged(e=>{e&&(je.commit("setCurrentUser",e),je.dispatch("fetchUserProfile"),je.dispatch("fetchAllUsers"),ge.usersCollection.doc(e.uid).onSnapshot(e=>{je.commit("setUserProfile",e.data())}),je.dispatch("fetchEvents"),je.dispatch("fetchConversations"))});const je=new i["a"].Store({state:{currentUser:null,numberOfEventsCreatedByUser:0,userProfile:{},events:[],allUsers:[],activeChatUser:"",conversations:[],friends:[],currentConversation:{}},actions:{clearData({commit:e}){e("setCurrentUser",null),e("setUserProfile",{}),e("setActiveChatUser",""),e("setEvents",[]),e("setNumberOfEventsCreatedByUser",0),e("setConversations",[]),e("setCurrentConversation",{}),e("setFriends",[]),e("setAllUsers",[])},fetchUserProfile({commit:e,state:t}){ge.usersCollection.doc(t.currentUser.uid).get().then(t=>{const s=t.data();e("setUserProfile",s),s.friends&&s.friends.length}).catch(e=>{console.log(e)})},fetchConversations({commit:e,state:t}){let s=[],r=[],a={};ge.conversationsCollection.where("participants","array-contains",t.currentUser.uid).onSnapshot(n=>{n.forEach(e=>{const n=e.data();n.id=e.id,s.push(n),r=[...r,...n.participants],n.participants.includes(t.activeChatUser)&&(a=n)});const i=r.filter(e=>e!==t.currentUser.uid);e("setConversations",s),e("setFriends",i),(t.activeChatUser&&!t.activeChatUser.length||!t.setActiveChatUser)&&e("setActiveChatUser",i[0]),e("setCurrentConversation",a)})},fetchAllUsers({commit:e,state:t}){const s=[];ge.usersCollection.onSnapshot(e=>{e.forEach(e=>{const t=e.data();s.push({uid:e.id,email:t.email,name:t.name,country:t.country,city:t.city,avatar:t.avatar})})}),e("setAllUsers",s)},fetchEvents({commit:e,state:t}){ge.eventsCollection.orderBy("date").onSnapshot(s=>{let r=[],a=0;s.forEach(e=>{let s=e.data();s.id=e.id,t.currentUser.uid===s.userId&&(s.isCurrentUserEvent=!0,a++),r.push(s)}),e("setNumberOfEventsCreatedByUser",a),e("setEvents",r)})}},mutations:{setCurrentUser(e,t){e.currentUser=t},setActiveChatUser(e,t){e.activeChatUser=t},setUserProfile(e,t){e.userProfile=t},setEvents(e,t){e.events=t},setConversations(e,t){e.conversations=t},setFriends(e,t){e.friends=t},setCurrentConversation(e,t){e.currentConversation=t},setAllUsers(e,t){e.allUsers=t||[]},setNumberOfEventsCreatedByUser(e,t){e.numberOfEventsCreatedByUser=t}}});s("7e7d");const ye=s("1543");let we;r["default"].config.productionTip=!1,ye.auth.onAuthStateChanged(e=>{we||(we=new r["default"]({el:"#app",router:ve,store:je,render:e=>e(g),created(){if(sessionStorage.redirect){const e=sessionStorage.redirect;delete sessionStorage.redirect,this.$router.push(e)}}}))})},"7e7d":function(e,t,s){}});
//# sourceMappingURL=app.2f581285.js.map